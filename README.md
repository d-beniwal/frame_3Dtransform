# frame_3Dtransform
Coordinate frame transformation in 3-dimensions with rotation and translation support

<hr />

<ins> **Contents**</ins> :
- file: helpers.py: Contains helper functions for calibration and coordinate transformation
- file: calibrate_frames.py: Runs the frame calibration to generate transformation matrix
- file: validate_code.py: Automatically tests the transformation algorithm using known rotations and translations
- file: transform_coord.py: Transform a user input coordinate using a transformation matrix file
- file: ref_points.txt: File with reference points from frame 1 and frame 2 to perform calibration
- file: trans_matrix.txt: Transformation matrix as a text file generated by calibration
- file: trans_matrix.npy: Transformation matrix as a binary .npy file generated by calibration

<hr />

### Running the calibration to create transformation matrix

First create the 'ref_points.txt' file that has coordinates for atleast 3 non-colinear points in both frame 1 and frame 2 coordinate system.
The calibation code checks colinearity automatically and will throw a WARNING if it cannot detect minimum 3 non-colinear points.

To create the transformation matrix, run the calibation as below:

```bash
python calibrate_frames.py ref_points.txt -saveName <filename-for-trans-matrix>
```

-saveName argument is optional. The default savename is "trans_matrix". The tranformation matrix is saved both as a binary file (.npy) and as a text file (.txt).

The transformation matrix is a 4x4 matrix of form:

[[r11, r12, r13, tx],

[r21, r22, r23, ty],

[r31, r32, r33, tz],

[0,   0,   0,   1]]

Here (r11, r12, ..., r33) are rotation matrix components, and (tx,ty,tz) are translation vector components.

<hr />

### To validate the algorithm, run the automated validation as below:
```bash
python validate_code.py
```
It automatically checks if the algorithm for coordinate transformation has been implemented correctly or not. It works by randomly sampling a set of points in frame 1, then randomly samples rotation angles and frame translation and then calculating points in frame 2 using this known rotation/translation. It then computes the transformation matrix using these set of points in frame 1 and 2. The frame 2 coordinates are then predicted using frame 1 points and transformation matrix. If these predicted frame 2 coordinates match the calculated coordinates (using known rotation/translation), then the transformation matrix is correct.

<hr />

### To transform a coordinate in frame 1 to frame 2 using an existing transformation matrix, run as below:

```bash
python transform_coord.py trans_matrix.txt -p 1,4,2
```

Argument -p is used to provide x,y,z coordinates separated by comma

The binary file 'trans_matrix.npy' can also be used instead of the .txt file.